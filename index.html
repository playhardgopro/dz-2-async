<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    Посмотрите код страницы и вывод в консоль браузера.

    <script src="shri-async-hw.js"></script>

    <script>
      const {
        AsyncArray,
        add,
        subtract,
        multiply,
        divide,
        mod,
        less,
        equal,
        lessOrEqual,
        sqrt
      } = Homework;

      const a = new AsyncArray([1, 2, 3]);

      // console.log('добавление элемента');
      // a.push(4, () => {
      //   console.log('добавление элемента выполнено');
      //   a.print();
      // });
      // a.print();

      // console.log('получение длины массива sync');
      // a.length(result => {
      //   console.log('получение длины массива выполнено cb');
      //   console.log('результат', result);
      //   a.print();
      // });
      // a.print();
      // let results = [];
      //     let i;
      //     for (i = 0; i < resolve; i = i + 1) {
      //       console.log(i, 'not inside', resolve);
      //       if (callback.call(await thisArg, await arr[i], await i, await arr)) {
      //         console.log(i, 'inside');
      //         arr
      //           .get(i)
      //           .then(
      //             resolve => results.push(resolve),
      //             reject => console.log
      //           )
      //           .catch(e => console.error(e));
      //       }
      //     }
      //     return results;
      //   });

      function filter(arr, callback, thisArg) {
        let len = new Promise(resolve => arr.length(resolve));
        len
          .then(resolve => console.log(resolve, 'length'))
          .then(() => {
            let lastItem = new Promise(resolve => arr.pop(resolve));
            return lastItem;
          })
          .then(resolve => console.log(callback(resolve), 'for', resolve))
          .then(() => {
            let lastItem = new Promise(resolve => arr.pop(resolve));
            return lastItem;
          })
          .then(resolve => console.log(callback(resolve), 'for', resolve))
          .then(() => {
            let lastItem = new Promise(resolve => arr.pop(resolve));
            return lastItem;
          })
          .then(resolve => console.log(callback(resolve), 'for', resolve))
          .then(() => {
            let lastItem = new Promise(resolve => arr.pop(resolve));
            return lastItem;
          })
          .catch(e => console.warn(e, 'error'));
      }

      filter(a, el => el === 2);

      // console.log('присваивание элемента по индексу');
      // a.set(2, 999, () => {
      //   console.log('присваивание элемента по индексу выполнено');
      //   a.print();
      // });
      // a.print();

      // console.log('получение элемента по индексу');
      // a.get(0, result => {
      //   console.log('получение элемента по индексу выполнено');
      //   console.log('результат', result);
      //   a.print();
      // });
      // a.print();

      // console.log('получение последнего элемента');
      // a.pop(result => {
      //   console.log('получение последнего элемента выполнено');
      //   console.log('результат', result);
      //   a.print();
      // });
      // a.print();

      // console.log('сложение: 5 + 2');
      // add(5, 2, result => console.log('результат сложения', result));

      // console.log('вычитание: 11 - 7');
      // subtract(11, 7, result => console.log('результат вычитания', result));

      // console.log('умножение: 6 * 7');
      // multiply(6, 7, result => console.log('результат умножения', result));

      // console.log('деление: 13 / 7');
      // divide(13, 7, result => console.log('результат деления', result));

      // console.log('остаток от деления: 17 % 7');
      // mod(17, 7, result => console.log('получен остаток от деления', result));

      // console.log('квадратный корень из 16');
      // sqrt(16, result => console.log('квадратный корень', result));

      // console.log('операция МЕНЬШЕ: 5 < 3');
      // less(5, 3, result => console.log('результат операции МЕНЬШЕ', result));

      // console.log('операция РАВНО: 1 == 1');
      // equal(1, 1, result => console.log('результат операции РАВНО', result));

      // console.log('операция МЕНЬШЕ ИЛИ РАВНО: 12 <= 19');
      // lessOrEqual(12, 19, result =>
      //   console.log('результат операции МЕНЬШЕ ИЛИ РАВНО', result)
      // );
    </script>
  </body>
</html>
